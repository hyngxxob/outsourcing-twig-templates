<div id="pay_modal" class="pay_modal" style="display: none;">
<form method="post" action="https://(ê³ ê°ì‚¬)/board" id='orderForm'>
<div id="modalLayout">
  <div style="text-align: right; margin:8px;">
    <span style="color: white; cursor: pointer;" onclick="closeModal_pay()">X</span>
  </div>
  <div id="pay_modal_Wrapper" style="padding: 32px; overflow-y: scroll;">
    <div>
      <span style="color: white; font-size:20px; font-weight:bold;">ì¶©ì „ê¸ˆì•¡</span><br>
      <input type="number" id="modal_amount" name="amount" value="" style="border: 0;border-radius: 4px;font-size: 16px;padding: 8px; width: 100%;" placeholder="ì¶©ì „ ê¸ˆì•¡ì„ ì„ íƒí•´ì£¼ì„¸ìš”." readonly><br><br>
      <div id="cash-hotkey">
        <div class="cash-hotkeyBtn" onclick="pay_add_1()">+ 1ë§Œì›</div>
        <div class="cash-hotkeyBtn" onclick="pay_add_5()">+ 5ë§Œì›</div>
        <div class="cash-hotkeyBtn" onclick="pay_add_10()">+ 10ë§Œì›</div>
        <div class="cash-hotkeyBtn" onclick="pay_add_100()">+ 100ë§Œì›</div>
      </div><br><br>
      <span style="color: white; font-size:20px; font-weight:bold;">ì…ê¸ˆìëª…</span><br>
      <input type="text" name="name" value="" id="modal_CashBuyerName" style="border: 0;border-radius: 4px;font-size: 16px;padding: 8px; width: 100%;" placeholder="ì…ê¸ˆìëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."><br/>
      <span style="font-size: 9px; font-weight:bold; color:white;">ì‹¤ì œ ì…ê¸ˆìì™€ ì‘ì„±í•œ ì…ê¸ˆìëª…ì´ ì¼ì¹˜í•´ì•¼ ì¶©ì „ë©ë‹ˆë‹¤.</span><br><br><br>
      <span style="color: white; font-size:20px; font-weight:bold;">í˜„ê¸ˆì˜ìˆ˜ì¦ / ì„¸ê¸ˆê³„ì‚°ì„œ</span><br>
      <div id="type-receipt" style="">
        <div class="type-receiptBtn" onclick="pay_null()">ì‹ ì²­ì•ˆí•¨</div>
        <div class="type-receiptBtn" onclick="pay_cashReceipts()">í˜„ê¸ˆì˜ìˆ˜ì¦</div>
        <div class="type-receiptBtn" onclick="pay_taxBill()">ì„¸ê¸ˆê³„ì‚°ì„œ</div>
      </div>
      {# í˜„ê¸ˆì˜ìˆ˜ì¦ ëˆŒë €ì„ ë•Œ visible #}
      <div id="pay_cashReceipts" style="display: none;">
        <br>
        <span style="color: white; font-size:20px; font-weight:bold;">íœ´ëŒ€ì „í™”ë²ˆí˜¸</span><br>
        <input type="text" name="phone" value="" style="border: 0;border-radius: 4px;font-size: 16px;padding: 8px; width: 100%;" placeholder="íœ´ëŒ€ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.">
      </div>
      {# ì„¸ê¸ˆê³„ì‚°ì„œ ëˆŒë €ì„ ë•Œ visible #}
      {# íšŒì‚¬ëª…, ëŒ€í‘œìëª…, ì‚¬ì—…ìë²ˆí˜¸, ë‹´ë‹¹ì ì—°ë½ì²˜, ì „ìì„¸ê¸ˆê³„ì‚°ì„œ ë°›ì„ ì´ë©”ì¼ #}
      <div id="pay_taxBill" style="display: none;">
        <br>
        <span style="color: white; font-size:20px; font-weight:bold;">íšŒì‚¬ëª…</span><br>
        <input type="text" id="taxBill_1" name="company_name" value="" style="border: 0;border-radius: 4px;font-size: 16px;padding: 8px; width: 100%;" placeholder="íšŒì‚¬ëª…ì„ ì…ë ¥">
        <br><br>
        <span style="color: white; font-size:20px; font-weight:bold;">ëŒ€í‘œìëª…</span><br>
        <input type="text" id="taxBill_2" name="ceo" value="" style="border: 0;border-radius: 4px;font-size: 16px;padding: 8px; width: 100%;" placeholder="ëŒ€í‘œìëª…ì„ ì…ë ¥">
        <br><br>
        <span style="color: white; font-size:20px; font-weight:bold;">ì‚¬ì—…ìë²ˆí˜¸</span><br>
        <input type="text" id="taxBill_3" name="corperate" value="" style="border: 0;border-radius: 4px;font-size: 16px;padding: 8px; width: 100%;" placeholder="ì‚¬ì—…ìë²ˆí˜¸ë¥¼ ì…ë ¥">
        <br><br>
        <span style="color: white; font-size:20px; font-weight:bold;">ë‹´ë‹¹ì ì—°ë½ì²˜</span><br>
        <input type="text" id="taxBill_4" name="officer" value="" style="border: 0;border-radius: 4px;font-size: 16px;padding: 8px; width: 100%;" placeholder="ë‹´ë‹¹ì ì—°ë½ì²˜ë¥¼ ì…ë ¥">
        <br><br>
        <span style="color: white; font-size:20px; font-weight:bold;">ì „ìì„¸ê¸ˆê³„ì‚°ì„œ ë°›ì„ ì´ë©”ì¼</span><br>
        <input type="text" id="taxBill_5" name="tax_email" value="" style="border: 0;border-radius: 4px;font-size: 16px;padding: 8px; width: 100%;" placeholder="ì „ìì„¸ê¸ˆê³„ì‚°ì„œ ë°›ì„ ì´ë©”ì¼ì„ ì…ë ¥">
      </div>
      <input type="text" id="receipt" name="receipt" value="" style="display: none;">
      <input type="text" name="payment" value="ê³„ì¢Œì´ì²´" style="display: none;">
      <input type="text" name="status" value="ìŠ¹ì¸ëŒ€ê¸°" style="display: none;">
      <input type="text" name="id" value={{ user['username'] }} style="display: none;">
    </div>
    <div><br><br>
      <button style="width:100%; background:#FF3E52; color:white; padding:16px; border-radius:8px;" id='orderSubmitBtn'>í¬ì¸íŠ¸ ì¶©ì „</button>
      {# <meta http-equiv="refresh" content="0;URL='http://example.com/'"> #}
    </div>
  </div>
</div>
</form>
</div>
<div id="pay_Cardmodal" class="pay_modal2" style="display: none;">
<div id="modalLayout">
  <div style="text-align: right; margin:8px;">
    <span style="color: white; cursor: pointer;" onclick="closeCardModal_pay()">X</span>
  </div>
  <div style="padding: 32px;">
    <div>
      <span style="color: white; font-size:20px; font-weight:bold;">ì¶©ì „ê¸ˆì•¡</span><br>
      <input type="number" id="modal_CardAmount" name="amount" value="" style="border: 0;border-radius: 4px;font-size: 16px;padding: 8px; width: 100%;" placeholder="ì¶©ì „ ê¸ˆì•¡ì„ ì„ íƒí•´ì£¼ì„¸ìš”." readonly><br><br>
      <div id="cash-hotkey">
        <div class="cash-hotkeyBtn" onclick="pay_card_add_1()">+ 1ë§Œì›</div>
        <div class="cash-hotkeyBtn" onclick="pay_card_add_5()">+ 5ë§Œì›</div>
        <div class="cash-hotkeyBtn" onclick="pay_card_add_10()">+ 10ë§Œì›</div>
        <div class="cash-hotkeyBtn" onclick="pay_card_add_100()">+ 100ë§Œì›</div>
      </div><br>
      <span style="color: white; font-size:20px; font-weight:bold;">êµ¬ë§¤ìëª…</span><br>
      <input type="text" id="modal_CardBuyerName" name="name" value="" style="border: 0;border-radius: 4px;font-size: 16px;padding: 8px; width: 100%;" placeholder="êµ¬ë§¤ìëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."><br>
      <span style="font-size: 9px; font-weight:bold; color:white;">ì‹¤ì œ ì…ê¸ˆìì™€ ì‘ì„±í•œ ì…ê¸ˆìëª…ì´ ì¼ì¹˜í•´ì•¼ ì¶©ì „ë©ë‹ˆë‹¤.</span><br>
    </div>
    <div><br><br>
      {# id="btn_pay" name="btn_pay" #}
      <input type="button" class="btn_submit" onclick="noauth()" value="í¬ì¸íŠ¸ ì¶©ì „" style="width: 100%;background: #FF3E52;color: white;padding: 16px;border-radius: 8px;">
      {# <meta http-equiv="refresh" content="0;URL='http://example.com/'"> #}
    </div>
  </div>
</div>
</div>

<div id="cancel_modal" class="cancel_modal" style="display: none;">
<div style="display: flex;flex-direction: column;padding: 32px;background: linear-gradient(to bottom, #1a4394 ,#000000);margin: auto;max-width: 500px;border-radius: 32px;">
<div style="text-align: right; margin:8px;">
<span style="color: white; cursor: pointer;" onclick="closeModal_cancel()">X</span>
</div>
<div style="padding: 32px;">
<div>
  <span style="color: white; font-size:20px; font-weight:bold;">ì´ë¯¸ ì§„í–‰ì¤‘ì¸ ê²°ì œê°€ ì¡´ì¬í•©ë‹ˆë‹¤.</span><br>
  <span style="color: white; font-size:20px; font-weight:bold;">ê¸°ì¡´ ê±°ë˜ë¥¼ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?</span><br>  
</div>
<div><br><br>
  <button type="submit" onclick="pay_cancel()" style="width:100%; background:#FF3E52; color:white; padding:16px; border-radius:8px;">ì·¨ì†Œ</button>
  {# <meta http-equiv="refresh" content="0;URL='http://example.com/'"> #}
</div>
</div>
</div>
</div>
<div class="container" style="width:100%; margin-right:0; margin-left:0;">
<div class="row" style="width: 100%;">
<div class="col-md-8 col-md-offset-2" style="width:100%;">
{# <div>
<button onclick="test()">test</button>
</div> #}
<div class="contentBoxWrapper">
  <span style="font-size:12px;">
    <h3 style="font-weight: bold;">
    í¬ì¸íŠ¸ ì¶©ì „ ì•ˆë‚´
    </h3>
    â€¢ ê²°ì œê¸ˆì•¡ê³¼ ì…ê¸ˆìëª…ì´ ì •í™•íˆ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤<br/>
    (ì¼ì¹˜í•˜ì§€ ì•Šì„ ê²½ìš°, ì „ì‚° ê³¼ì •ì—ì„œ ëˆ„ë½ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤)<br/>
    â€¢ ì…ê¸ˆì™„ë£Œ í›„ 1~10ë¶„ì´ë‚´ ìë™ìœ¼ë¡œ ì”ì•¡ì´ ì¶©ì „ë©ë‹ˆë‹¤<br/>
    (ì¶©ì „ì´ ì•ˆë  ê²½ìš°, ì¹´ì¹´ì˜¤ì±„ë„ë¡œ ë¬¸ì˜ ì£¼ì„¸ìš”).<br/>
    â€¢ 3ì‹œê°„ì´ ì§€ë‚˜ë©´ ì¶©ì „ì´ ìë™ìœ¼ë¡œ ì·¨ì†Œë©ë‹ˆë‹¤<br/>
    â€¢ ê³„ì‚°ì„œ/í˜„ê¸ˆì˜ìˆ˜ì¦ì€ ì¶©ì „ì‹œ ì‹ ì²­ì£¼ì‹œë©´ ì²˜ë¦¬ë©ë‹ˆë‹¤.<br/>
  </span>
</div>
<div class="well" id="addfunds-well" style=" padding:0;margin-top:16px; gap:16px;">
  <div class="contentBoxWrapper" style="flex:1; height:500px;">
    <div style="display: flex; flex-direction:column;">
      <div>
        <h3 style="font-weight:bold;">í¬ì¸íŠ¸ ì¶©ì „</h3>
      </div>
      <div style="background-color: #ff3e5226; margin-bottom:16px; padding:32px;">
        <strong>
          [ê³„ì¢Œë²ˆí˜¸ ì•ˆë‚´]<br/>
           672102-04-211438 êµ­ë¯¼ì€í–‰ ì²œëŒ€í¬<br/>
          * ê³„ì¢Œì´ì²´ ì‹ ì²­ -> ì…ê¸ˆì´ ì™„ë£Œëœ í›„ì—ë„ ì¶©ì „ì´ ë˜ì§€ ì•Šì€ ê²½ìš° ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ë¬¸ì˜ì£¼ì„¸ìš”.<br/>
        </strong>
      </div>
      <div id="pay-container" style="display: flex; align-items: flex-end;">
        <div style="flex:1; width:100%;">
            <form name="frm" id="frm" method="post">
              <input type="hidden" name="PayMethod"       value="CARD">
              <input type="hidden" name="MID"       value="pgjaba002m"> <!--ìƒì ì•„ì´ë”” ì…ë ¥-->
              <input type="hidden" name="MerchantKey" value="gD/xFAEaFgWtI/iZlPC527ljr2MO5rw7HcPdVPUYIvBERTowolifVGLb8SSCwFQSggctLfu8PD28NRFYJdkcgA=="> <!--ë¼ì´ì„¼ìŠ¤í‚¤ ì…ë ¥-->
              <input type="hidden" name="GoodsName"       value="(ê³ ê°ì‚¬) í¬ì¸íŠ¸ ì¶©ì „">
              <input id="Amt" type="hidden" name="Amt"       value="">
              <input id="BuyerName" type="hidden" name="BuyerName"       value="">
              <input type="hidden" name="BuyerTel"       value="012345678">
              <input type="hidden" name="BuyerEmail"       value="sample@sample.com">
              <input type="hidden" name="ResultYN"       value="Y">
              {# <input type="hidden" name="ReturnURL"       value="https://pg.innopay.co.kr/ipay/returnPay.jsp">  #}
              <input type="hidden" name="ReturnURL"       value="https://(ê³ ê°ì‚¬)/board/card/{{user['username']}}"> 
              {# <input type="hidden" name="Moid"       value="testpay01m01234567890"> #}
              <input type="hidden" name="Moid"       value="testpay01m01234567890">
                                      
              <input type="button" class="btn_submit" onclick="noauth()" value="ğŸ’³" style="width:100%; border:0; background:transparent; font-size:50px;">
              <!--ê²°ì œìš”ì²­ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì´ë…¸í˜ì´ ê²°ì œì°½ì„ í˜¸ì¶œí•©ë‹ˆë‹¤. -->
            </form>
            <div style="text-align: center;">
              <span style="font-size: 20px; font-weight: bold;">ì‹ ìš©ì¹´ë“œ</span>
            </div>
        </div>
        <div style="flex:1; width:100%;">
          <button onclick="noauth_cash()" style="width:100%; border:0; background:transparent; font-size:50px;">ğŸ’¸</button>
          <div style="text-align: center;">
            <span style="font-size: 20px; font-weight: bold;">ë¬´í†µì¥ ì…ê¸ˆ</span>
          </div>
          {# <form method="get" action="http://54.180.161.196:3000/board/id/admin">
          <button type="submit">ttt</button>
          </form> #}
        </div>
      </div>
    </div>
  </div>
  <div class="contentBoxWrapper" style="flex:1; height:500px; overflow-y:scroll; padding:16px!important;">
    <table class="table" style="white-space: nowrap; text-align: center;">
      <thead>
      <tr>
        {# <th>{{ lang('addfunds.id') }}</th> #}
        {# <th>ë²ˆí˜¸</th> #}
        <th>ìƒíƒœ</th>
        <th>{{ lang('addfunds.date') }}</th>
        <th>{{ lang('addfunds.method') }}</th>
        <th>{{ lang('addfunds.amount') }}</th>
      </tr>
      </thead>
      <tbody id='order-history'>
      </tbody>
    </table>
    <div class="spinner-border" role="status" id='loading-order-history'>
    </div>
  </div>
</div>
{% if pagination['count'] > 50 %}
  <div class="nav-pills">
    <ul class="pagination {% if site['rtl'] %} rtl-pagination {% endif %}">
      {% if pagination['current'] != 1 %}
        <li>
          <a href="{{ page['url'] }}/{{ pagination['last'] }}" aria-label="Previous">
            <span aria-hidden="true">&laquo;</span>
          </a>
        </li>
      {% endif %}

      {% set r, l = 3, 3 %}

      {% if pagination['current'] == 1 %}
        {% set r = 6 %}
      {% endif %}

      {% if pagination['current'] == 2 %}
        {% set r = 5 %}
      {% endif %}

      {% if pagination['current'] >= pagination['pages'] %}
        {% set l = 5 %}
      {% endif %}

      {% for i in 1..ceil(pagination['pages']) %}
        {% if i >= (pagination['current']-l) and i <= (pagination['current']+r) %}
          <li{% if i == pagination['current'] %} class="active"{% endif %}><a href="{{ page['url'] }}/{{i}}">{{i}}</a></li>
        {% endif %}
      {% endfor %}

      {% if pagination['current'] < pagination['pages'] %}
        <li>
          <a href="{{ page['url'] }}/{{ pagination['next'] }}" aria-label="Next">
            <span aria-hidden="true">&raquo;</span>
          </a>
        </li>
      {% endif %}
    </ul>
  </div>
{% endif %}
</div>
</div>
</div>

<script>
function initChk() {
  if($('#modal_CardBuyerName').val() == "") {
    $('#btn_pay').hide();
  } else {$('#btn_pay').show();}
  //$('#tip-selectBox').click();
  if($('#modal_CashBuyerName').val() == "") {
    $('#orderSubmitBtn').hide();
  } else {$('#orderSubmitBtn').show();}
}

setInterval(initChk,0);

var typeReceiptWrap = document.getElementById("type-receipt");
var typeReceipt = typeReceiptWrap.getElementsByClassName("type-receiptBtn");
for (var i = 0; i < typeReceipt.length; i++) {
typeReceipt[i].addEventListener("click", function() {
var current = document.getElementsByClassName("type-receiptBtn active");
if (current.length > 0) { 
current[0].className = current[0].className.replace(" active", "");
}
this.className += " active";
});
}

function modal() {
const x = "{{user['username']}}";
fetch(`https://(ê³ ê°ì‚¬)/board/id/${x}`, {
  method: 'GET',
  headers: {
      'Content-Type': 'application/json'
  }
  })
  .then(response =>{
    //console.log(response);
    //console.log("here1");
    if(response.status == "400") {
      document.getElementById('pay_modal').style.display = "initial";
      document.getElementById('modalBack').style.display = "initial";
      /*if(localStorage.getItem("taxBill_1").length > 0) {
        $('#taxBill_1').val(localStorage.getItem("taxBill_1"));
        $('#taxBill_2').val(localStorage.getItem("taxBill_2"));
        $('#taxBill_3').val(localStorage.getItem("taxBill_3"));
        $('#taxBill_4').val(localStorage.getItem("taxBill_4"));
        $('#taxBill_5').val(localStorage.getItem("taxBill_5"));
      }*/
    } else if(response.status == 200) {
      alert('ì§„í–‰ì¤‘ì¸ ê²°ì œê°€ ì¡´ì¬í•©ë‹ˆë‹¤.');
      document.getElementById('cancel_modal').style.display = "initial";
    }
    })
  .then(response => {
      {# if(response.status == "200") {
        alert('ì§„í–‰ì¤‘ì¸ ê²°ì œê°€ ì¡´ì¬í•©ë‹ˆë‹¤.');
        document.getElementById('cancel_modal').style.display = "initial";
      } else {
        console.log("modal open");
        document.getElementById('pay_modal').style.display = "initial";
      } #}
      })
      }

function pay_cancel() {
const x = "{{user['username']}}";
fetch(`https://(ê³ ê°ì‚¬)/board/${x}`, {
method: 'PATCH',
headers: {
  'Content-Type': 'application/json'
}
})
.then(response =>{
document.getElementById('cancel_modal').style.display = "none";
})
.then(response => {
  })
  
}
function closeModal_cancel() {
document.getElementById('cancel_modal').style.display = "none";
}
function closeModal_pay() {
document.getElementById('modal_amount').value = "";
document.getElementById('pay_modal').style.display = "none";
document.getElementById('modalBack').style.display = "none";
}
function closeCardModal_pay() {
  $('#modal_CardAmount').val("");
document.getElementById('pay_Cardmodal').style.display = "none";
document.getElementById('modalBack').style.display = "none";
}
function pay_null() {
document.getElementById('receipt').value = "";
$('#pay_cashReceipts').hide();
$('#pay_taxBill').hide();
}
function pay_cashReceipts() {
document.getElementById('receipt').value = "í˜„ê¸ˆì˜ìˆ˜ì¦";
$('#pay_taxBill').hide();
$('#pay_cashReceipts').show();
}
function pay_taxBill() {
document.getElementById('receipt').value = "ì„¸ê¸ˆê³„ì‚°ì„œ";
$('#pay_cashReceipts').hide();
$('#pay_taxBill').show();
}

function pay_add_1() {
var total = document.getElementById('modal_amount').value;
total *= 1;
total += 10000;
document.getElementById('modal_amount').value=total;
document.getElementById('modal_amount').innerHTML = "10,000";
}

function pay_add_5() {
var total = document.getElementById('modal_amount').value;
total *= 1;
total += 50000;
document.getElementById('modal_amount').value=total;
}
function pay_add_10() {
var total = document.getElementById('modal_amount').value;
total *= 1;
total += 100000;
document.getElementById('modal_amount').value=total;
}
function pay_add_100() {
var total = document.getElementById('modal_amount').value;
total *= 1;
total += 1000000;
document.getElementById('modal_amount').value=total;
}


// card amount
function pay_card_add_1() {
var total = document.getElementById('modal_CardAmount').value;
total *= 1;
total += 10000;
document.getElementById('modal_CardAmount').value=total;
//document.getElementById('modal_CardAmount').innerHTML = "10,000";
}

function pay_card_add_5() {
var total = document.getElementById('modal_CardAmount').value;
total *= 1;
total += 50000;
document.getElementById('modal_CardAmount').value=total;
}
function pay_card_add_10() {
var total = document.getElementById('modal_CardAmount').value;
total *= 1;
total += 100000;
document.getElementById('modal_CardAmount').value=total;
}
function pay_card_add_100() {
var total = document.getElementById('modal_CardAmount').value;
total *= 1;
total += 1000000;
document.getElementById('modal_CardAmount').value=total;
}

function noauth_cash() {
  const currentUser = document.getElementById('currentID').innerHTML;

  if(currentUser == "observer") {
  alert("ë¡œê·¸ì¸ í›„ ì´ìš©ê°€ëŠ¥ í•©ë‹ˆë‹¤.");
  document.getElementById('frm').setAttribute("onsubmit", "return false");
  } else { modal(); }
}

function noauth() {
  alert("ì„œë¹„ìŠ¤ ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤.");
//const currentUser = document.getElementById('currentID').innerHTML;
//
//if(currentUser == "observer") {
//alert("ë¡œê·¸ì¸ í›„ ì´ìš©ê°€ëŠ¥ í•©ë‹ˆë‹¤.");
//document.getElementById('frm').setAttribute("onsubmit", "return false");
//} else {
//    $('#pay_Cardmodal').show();
//    $('#modalBack').show();
//    $('#Amt')[0].value = $('#modal_CardAmount').val() * 1 + $('#modal_CardAmount').val() * 0.05;
//    $('#BuyerName')[0].value = $('#modal_CardBuyerName').val();
//  }
}

function redirect() {
//location.href = "https://.com/addfunds";
}

function submit(){
  const formElement= $("#orderForm");

  const inputs= formElement.serializeArray();
  const formData= new FormData();
  inputs.forEach(input=>{
    const {name, value}= input;
    formData.append(name, value);
  });

  $.post(formElement.attr('action'), inputs)
  .done(()=>{
    //ì„±ê³µ
    alert('ì‹ ì²­ ì„±ê³µ');
    window.location.reload();
  })
  .fail(()=>{
    //ì‹¤íŒ¨
    alert('ì‹ ì²­ ì‹¤íŒ¨');
  });
}

$("#orderSubmitBtn").click(e=>{
  let taxBill_1 = $('#taxBill_1').val();
  let taxBill_2 = $('#taxBill_2').val();
  let taxBill_3 = $('#taxBill_3').val();
  let taxBill_4 = $('#taxBill_4').val();
  let taxBill_5 = $('#taxBill_5').val();

  localStorage.setItem("taxBill_1",taxBill_1);
  localStorage.setItem("taxBill_2",taxBill_2);
  localStorage.setItem("taxBill_3",taxBill_3);
  localStorage.setItem("taxBill_4",taxBill_4);
  localStorage.setItem("taxBill_5",taxBill_5);

  e.preventDefault();
  submit();
});

$.get("https://(ê³ ê°ì‚¬)/board/hi/{{user['username']}}")
.done(data=>{
  const {result}= data;

  const moneyFormat= (number)=>{
    if(number==0) return 0;
    var reg = /(^[+-]?\d+)(\d{3})/;
    var n = (number + '');
    while (reg.test(n)) n = n.replace(reg, '$1' + ',' + '$2');
    return n;
  };

  $("#order-history").html(result.map(row=>{
    //console.log(row);
    const {number, status, request_time, payment, amount}= row;
    const korTime = new Date(row.request_time).toString();
    //console.log(korTime);
    
    var arr = korTime.split(" ");
    var rst = "";
    var month = "";
    switch(arr[1]) {
        case "Jan" :
            month = "01"
        break;

        case "Feb" :
            month = "02"
        break;        

        case "Mar" :
            month = "03"
        break;

        case "Apr" :
            month = "04"
        break;

        case "May" :
            month = "05"
        break;

        case "Jun" :
            month = "06"
        break;

        case "Jul" :
            month = "07"
        break;

        case "Aug" :
            month = "08"
        break;

        case "Sep" :
            month = "09"
        break;

        case "Oct" :
            month = "10"
        break;

        case "Nov" :
            month = "11"
        break;

        case "Dec" : 
            month = "12"
        break;
    }
    rst = arr[3] + "-" + month + "-" + arr[2] + " " + arr[4]; 
    //console.log(rst);

    //var trim1 = row.request_time.replace("T"," ");
    //var trim2 = trim1.substring(0,19);
    //console.log(trim2);
    //<td>${request_time}</td>
    return `
      <tr>
        <td>${status}</td>
        <td>${rst}</td>
        <td>${payment}</td>
        <td>${moneyFormat(amount)}</td>
      </tr>
    `;
  }).join(''));
})
.always(()=> $("#loading-order-history").remove());

</script>